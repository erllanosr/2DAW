<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <title>Document</title>
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
  <script type="text/javascript">
    // Si se crea el nombre de la base de datos, el nombre de la tabla se ha creado en otro webSQL anteriormente, entonces se hará referencia directa al contenido de los datos y no se creará ninguna nueva.
    // Establecer nombre de la base de datos, versión, grupo de conexiones, tamaño
    var webbd = window.openDatabase("datos.db", "1.0", null, 20000);
    // crear tabla
    webbd.transaction(function (tr) {
      tr.executeSql("create table usuarios(_id integer primary key autoincrement,nombre text,clave text)")
    })

    // Agregar, eliminar y modificar el formato webbd.executeSql ("instrucción sql", [parámetro])
    // Insertar datos
    function insertar() {
      webbd.transaction(function (tr) {
        console.log(tr); // Una SQLTransaction {}
        tr.executeSql("insert into usuarios (nombre, clave) values (?,?)", ["pepe", "123456"]);

      })
    }
    // Eliminar la base de datos
    function borrarDatos() {
      webbd.transaction(function (tr) {
        tr.executeSql("drop table usuarios");
      })
    }

    // Modificar los datos
    function modificar(id, nuevoNombre, nuevaClave) {
      webbd.transaction(function (tr) {
        tr.executeSql("update usuarios set nombre=?,clave=? where _id=?", [nuevoNombre, nuevaClave, id]);
      })
    }
    // Consultar datos
    function consultar() {
      webbd.transaction(function (tr) {
        // resultado devuelve una matriz
        tr.executeSql('select * from usuarios', [], function (tr, result) {
          console.log(result);
          var contenido = "";
          for (var i = 0; i < result.rows.length; i++) {
            let dd = result.rows[i];
            contenido += "<p>" + dd._id + " - " + dd.nombre + " >>> " + dd.clave + "</p>";

          }
          $("#demo").html(contenido);
        }) //tr.executeSql
      })
    }
  </script>
</head>
<body>
  <div class="container pt-5">

    <form action="">
      <label for="id">ID</label>
      <input type="number" name="id" id="">
      <br>
      <br>
      <label for="usuario">Usuario</label>
      <input type="text" name="usuario" id="">
      <br>
      <br>
      <label for="clave">Clave</label>
      <input type="text" name="clave">
      <br>
      <br>
      <input type="radio" name="" id="">WEBSQL
      <input type="radio" name="" id="">INDEXDB


    </form>



    <button class="btn btn-primary" onclick="insertar()"> Insertar datos </button>
    <button class="btn btn-primary" onclick="borrarDatos()"> Eliminar toda la tabla </button>
    <button class="btn btn-primary" onclick="modificar (1, 'Lola', '654321')"> Actualice los datos del No. 1 </button>
    <button class="btn btn-primary" onclick="consultar()"> Consultar datos </button>
    <div id="demo">
    </div>
  </div>
</body>
</html>